(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{KyM8:function(t,e,i){"use strict";i.r(e),i.d(e,"SkillsModule",(function(){return H}));var n=i("ofXK"),s=i("mrSG"),c=i("wHSu"),r=i("PdH4"),o=i.n(r),l=i("s1z9"),a=i("kh4u");const u=t=>{switch(t){case"Manager":return 1;case"Resource":return 2}};var h=i("fXoL"),b=i("LRrx"),p=i("MFUF"),d=i("c9Ax"),g=i("3Pt+"),f=i("oOf3"),S=i("6NWb"),k=i("o7am");function v(t,e){if(1&t&&(h.Xb(0,"option",12),h.Ic(1),h.Wb()),2&t){const t=e.$implicit;h.nc("ngValue",t),h.Fb(1),h.Kc(" ",t," ")}}function m(t,e){if(1&t&&(h.Xb(0,"option",12),h.Ic(1),h.Wb()),2&t){const t=e.$implicit;h.nc("ngValue",t),h.Fb(1),h.Kc(" ",t," ")}}function I(t,e){if(1&t&&(h.Xb(0,"option",12),h.Ic(1),h.Wb()),2&t){const t=e.$implicit;h.nc("ngValue",t),h.Fb(1),h.Kc(" ",t," ")}}function O(t,e){if(1&t){const t=h.Yb();h.Xb(0,"div",6),h.Xb(1,"h3",7),h.Ic(2," Show \xa0 "),h.Wb(),h.Xb(3,"select",8),h.ec("ngModelChange",(function(e){return h.Ac(t),h.hc().changeActiveOption(e)})),h.Gc(4,I,2,2,"option",9),h.Wb(),h.Wb()}if(2&t){const t=h.hc();h.Fb(3),h.nc("ngModel",t.retrievePageState.activeOptions),h.Fb(1),h.nc("ngForOf",t.activeOptionsManager)}}function P(t,e){if(1&t&&(h.Xb(0,"option",12),h.Ic(1),h.Wb()),2&t){const t=e.$implicit;h.nc("ngValue",t),h.Fb(1),h.Kc(" ",t," ")}}function U(t,e){if(1&t){const t=h.Yb();h.Xb(0,"div",6),h.Xb(1,"h3",7),h.Ic(2," Show \xa0 "),h.Wb(),h.Xb(3,"select",8),h.ec("ngModelChange",(function(e){return h.Ac(t),h.hc().changeActiveOption(e)})),h.Gc(4,P,2,2,"option",9),h.Wb(),h.Wb()}if(2&t){const t=h.hc();h.Fb(3),h.nc("ngModel",t.retrievePageState.activeOptions),h.Fb(1),h.nc("ngForOf",t.activeOptionsResource)}}function F(t,e){1&t&&(h.Xb(0,"th"),h.Ic(1,"Number of Resources"),h.Wb())}function X(t,e){1&t&&(h.Xb(0,"th"),h.Ic(1," Skill Requested By"),h.Wb())}function W(t,e){1&t&&(h.Xb(0,"th"),h.Ic(1," Status"),h.Wb())}function C(t,e){1&t&&h.Tb(0,"th")}function y(t,e){1&t&&h.Tb(0,"th")}function R(t,e){if(1&t&&(h.Xb(0,"td"),h.Ic(1),h.Wb()),2&t){const t=h.hc().$implicit;h.Fb(1),h.Jc(t.totalResources)}}function w(t,e){if(1&t&&(h.Xb(0,"td"),h.Ic(1),h.Wb()),2&t){const t=h.hc().$implicit;h.Fb(1),h.Kc(" ",t.user.firstName+" "+t.user.lastName,"")}}function M(t,e){if(1&t){const t=h.Yb();h.Xb(0,"td"),h.Xb(1,"fa-icon",18),h.ec("click",(function(){h.Ac(t);const e=h.hc().$implicit;return h.hc(3).fireModel("edit",e)})),h.Wb(),h.Wb()}if(2&t){const t=h.hc(4);h.Fb(1),h.nc("icon",t.editIcon)}}function N(t,e){if(1&t){const t=h.Yb();h.Xb(0,"td"),h.Xb(1,"fa-icon",18),h.ec("click",(function(){h.Ac(t);const e=h.hc().$implicit;return h.hc(3).deleteSkill(e)})),h.Wb(),h.Wb()}if(2&t){const t=h.hc(4);h.Fb(1),h.nc("icon",t.deleteIcon)}}function G(t,e){if(1&t){const t=h.Yb();h.Xb(0,"td"),h.Xb(1,"fa-icon",18),h.ec("click",(function(){h.Ac(t);const e=h.hc().$implicit;return h.hc(3).approveSkill(e)})),h.Wb(),h.Wb()}if(2&t){const t=h.hc(4);h.Fb(1),h.nc("icon",t.checkIcon)}}function A(t,e){if(1&t){const t=h.Yb();h.Xb(0,"td"),h.Xb(1,"fa-icon",18),h.ec("click",(function(){h.Ac(t);const e=h.hc().$implicit;return h.hc(3).rejectSkill(e)})),h.Wb(),h.Wb()}if(2&t){const t=h.hc(4);h.Fb(1),h.nc("icon",t.crossicon)}}function E(t,e){if(1&t&&(h.Xb(0,"td"),h.Tb(1,"fa-icon",19),h.Wb()),2&t){const t=h.hc().$implicit,e=h.hc(3);h.Fb(1),h.nc("icon",t.approvalStatus?e.checkIcon:e.crossicon)}}function D(t,e){if(1&t&&(h.Xb(0,"tr"),h.Xb(1,"td"),h.Ic(2),h.Wb(),h.Xb(3,"td"),h.Ic(4),h.Wb(),h.Xb(5,"td"),h.Ic(6),h.Wb(),h.Gc(7,R,2,1,"td",11),h.Gc(8,w,2,1,"td",11),h.Gc(9,M,2,1,"td",11),h.Gc(10,N,2,1,"td",11),h.Gc(11,G,2,1,"td",11),h.Gc(12,A,2,1,"td",11),h.Gc(13,E,2,1,"td",11),h.Wb()),2&t){const t=e.$implicit,i=h.hc(3);h.Fb(2),h.Jc(t.skillID),h.Fb(2),h.Jc(t.skillName),h.Fb(2),h.Jc(t.description),h.Fb(1),h.nc("ngIf",i.approved),h.Fb(1),h.nc("ngIf",!((null==i.currentUser?null:i.currentUser.role)===i.Role.RESOURCE&&i.retrievePageState.activeOptions===i.activeOptionsResource[1])),h.Fb(1),h.nc("ngIf",i.approved&&(null==i.currentUser?null:i.currentUser.role)===i.Role.MANAGER),h.Fb(1),h.nc("ngIf",i.approved&&(null==i.currentUser?null:i.currentUser.role)===i.Role.MANAGER),h.Fb(1),h.nc("ngIf",!i.approved&&(null==i.currentUser?null:i.currentUser.role)===i.Role.MANAGER),h.Fb(1),h.nc("ngIf",!i.approved&&(null==i.currentUser?null:i.currentUser.role)===i.Role.MANAGER),h.Fb(1),h.nc("ngIf",(null==i.currentUser?null:i.currentUser.role)===i.Role.RESOURCE&&i.retrievePageState.activeOptions===i.activeOptionsResource[1])}}const x=function(t,e,i){return{id:"skill-pagination",itemsPerPage:t,currentPage:e,totalItems:i}};function T(t,e){if(1&t){const t=h.Yb();h.Xb(0,"div",14),h.Xb(1,"table",15),h.Xb(2,"thead"),h.Xb(3,"th"),h.Ic(4,"ID"),h.Wb(),h.Xb(5,"th"),h.Ic(6,"Skill Name"),h.Wb(),h.Xb(7,"th"),h.Ic(8,"Description"),h.Wb(),h.Gc(9,F,2,0,"th",11),h.Gc(10,X,2,0,"th",11),h.Gc(11,W,2,0,"th",11),h.Gc(12,C,1,0,"th",11),h.Gc(13,y,1,0,"th",11),h.Wb(),h.Xb(14,"tbody"),h.Gc(15,D,14,10,"tr",16),h.ic(16,"paginate"),h.Wb(),h.Tb(17,"tbody"),h.Wb(),h.Xb(18,"pagination-controls",17),h.ec("pageChange",(function(e){return h.Ac(t),h.hc(2).changePage(e)})),h.Wb(),h.Tb(19,"br"),h.Wb()}if(2&t){const t=h.hc(2);h.Fb(9),h.nc("ngIf",t.approved),h.Fb(1),h.nc("ngIf",!((null==t.currentUser?null:t.currentUser.role)===t.Role.RESOURCE&&t.retrievePageState.activeOptions===t.activeOptionsResource[1])),h.Fb(1),h.nc("ngIf",(null==t.currentUser?null:t.currentUser.role)===t.Role.RESOURCE&&t.retrievePageState.activeOptions===t.activeOptionsResource[1]),h.Fb(1),h.nc("ngIf",(null==t.currentUser?null:t.currentUser.role)===t.Role.MANAGER),h.Fb(1),h.nc("ngIf",(null==t.currentUser?null:t.currentUser.role)===t.Role.MANAGER),h.Fb(2),h.nc("ngForOf",h.kc(16,6,t.skillsUIModel,h.tc(9,x,t.retrievePageState.itemsCount,t.retrievePageState.pageNumber,t.totalItems)))}}function B(t,e){if(1&t&&(h.Vb(0),h.Gc(1,T,20,13,"div",13),h.Ub()),2&t){const t=h.hc();h.Fb(1),h.nc("ngIf",!t.fetching&&t.skillsUIModel.length)}}function $(t,e){1&t&&h.Tb(0,"app-loader")}function j(t,e){1&t&&(h.Xb(0,"div",22),h.Xb(1,"strong"),h.Ic(2,"No records found!"),h.Wb(),h.Wb())}function q(t,e){if(1&t){const t=h.Yb();h.Vb(0),h.Gc(1,j,3,0,"div",20),h.Xb(2,"input",21),h.ec("click",(function(){return h.Ac(t),h.hc().fireModel("add",{})})),h.Wb(),h.Ub()}if(2&t){const t=h.hc();h.Fb(1),h.nc("ngIf",!t.skillsUIModel.length&&!t.fetching)}}let _=(()=>{class t{constructor(t,e,i){this.skillsService=t,this.paginationService=e,this.authService=i,this.editIcon=c.i,this.deleteIcon=c.o,this.checkIcon=c.d,this.crossicon=c.n,this.countOptions=[10,20,40],this.sortOptions=["Skill ID","Skill Name"],this.activeOptionsManager=["Organisational","Unapproved"],this.activeOptionsResource=["Organisational","My Requests"],this.totalItems=20,this.approved=!0,this.fetching=!0,this.isMsgBoxVisible=!1,this.editOption={title:"",button:""},this.selectedSkill={skillID:0,skillName:"",description:"",totalResources:0},this.Role=a.a,this.getSkills=()=>{this.fetching=!0,this.skillsService.getSkills(this.retrievePageState.pageNumber,this.retrievePageState.itemsCount,this.retrievePageState.sortOptions,this.retrievePageState.activeOptions,this.retrievePageState.query,this.currentUser.role===a.a.RESOURCE&&this.retrievePageState.activeOptions===this.activeOptionsResource[1]?this.currentUser.userID.toString():"").subscribe(t=>{this.fetching=!1,this.totalItems=t.totalItems,this.skillsUIModel=t.result},t=>{this.fetching=!1,this.skillsUIModel=[]})},this.changePage=t=>{this.changePageState({id:"skill-pagination",pageNumber:t,itemsCount:this.retrievePageState.itemsCount,sortOptions:this.retrievePageState.sortOptions,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getSkills()},this.checkEmpty=t=>{""===t&&this.getSkills()},this.addSkill=()=>Object(s.a)(this,void 0,void 0,(function*(){const t={user_id:this.currentUser.userID,user_type:u(this.currentUser.role),name:this.selectedSkill.skillName,description:this.selectedSkill.description};return new Promise((e,i)=>{this.skillsService.createSkill(t).toPromise().then(t=>{e(),Object(l.a)().fire({icon:"success",title:this.selectedSkill.skillName+" added succesfully!"}),this.getSkills()})})})),this.updateSkill=()=>Object(s.a)(this,void 0,void 0,(function*(){const t={skillID:this.selectedSkill.skillID,userTypeId:u(this.currentUser.role),skillName:this.selectedSkill.skillName,description:this.selectedSkill.description};return new Promise((e,i)=>{this.skillsService.updateSkill(t).toPromise().then(t=>{e(),Object(l.a)().fire({icon:"success",title:"Skill updated succesfully!"}),this.getSkills()})})})),this.resetSkill=()=>{this.selectedSkill={skillID:0,skillName:"",description:"",totalResources:0}},this.approveSkill=t=>{o.a.fire({title:"Approve Skill ?",text:"Do you want to approve this skill?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:"sa-warn",showLoaderOnConfirm:!0,preConfirm:e=>{if(e){const e={skill_id:t.skillID,user_type:u(this.currentUser.role)};return new Promise((t,i)=>{this.skillsService.approveSkill(e).toPromise().then(e=>{t(),this.getSkills()})}).then(t=>{})}}})},this.rejectSkill=t=>{o.a.fire({title:"Reject Skill ?",text:"Do you want to reject this skill?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:"sa-warn",showLoaderOnConfirm:!0,preConfirm:e=>{if(e){const e={skill_id:t.skillID,user_type:u(this.currentUser.role),user_id:this.currentUser.userID};return new Promise((t,i)=>{this.skillsService.rejectSkill(e).toPromise().then(e=>{t(),this.getSkills()})}).then(t=>{})}}})},this.deleteSkill=t=>{o.a.fire({title:"Delete Skill ?",text:"This process cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:"sa-warn",showLoaderOnConfirm:!0,preConfirm:e=>{if(e){const e={skillID:t.skillID,userTypeId:u(this.currentUser.role)};return new Promise((t,i)=>{this.skillsService.deleteSkill(e).toPromise().then(e=>{t(),this.getSkills()})}).then(t=>{})}}})},this.changeItemsCount=t=>{this.changePageState({id:"skill-pagination",pageNumber:1,itemsCount:t,sortOptions:this.retrievePageState.sortOptions,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getSkills()},this.changeSortOption=t=>{this.changePageState({id:"skill-pagination",pageNumber:1,itemsCount:this.retrievePageState.itemsCount,sortOptions:t,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getSkills()},this.changeActiveOption=t=>{this.approved="Unapproved"!==t,this.changePageState({id:"skill-pagination",pageNumber:1,itemsCount:this.retrievePageState.itemsCount,sortOptions:this.retrievePageState.sortOptions,activeOptions:t,query:this.retrievePageState.query}),this.getSkills()},this.changePageState=t=>{this.paginationService.setSkillsPageState(t)},this.fireModel=(t="add",e)=>Object(s.a)(this,void 0,void 0,(function*(){let i="";"add"===t?i='<input id="swal-input1" class="swal2-input input-bar" placeholder = "Skill Name"><input id="swal-input2" class="swal2-input input-bar" placeholder = "Description">':"edit"===t&&(i=`<input id="swal-input1" class="swal2-input input-bar" placeholder = "Skill Name" value = "${e.skillName}"><input id="swal-input2" class="swal2-input input-bar" placeholder = "Description" value = "${e.description}">`),yield o.a.fire({customClass:"skill-dialog",title:"add"===t?"Add Skill":"Update Skill",html:i,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"add"===t?"Add":"Update",showLoaderOnConfirm:!0,allowOutsideClick:()=>!o.a.isLoading(),preConfirm:()=>{const i=document.getElementById("swal-input1").value,n=document.getElementById("swal-input2").value;return this.selectedSkill.skillName=i,this.selectedSkill.description=n,"edit"===t?(this.selectedSkill.skillID=e.skillID,this.updateSkill().then(t=>{})):this.addSkill().then(t=>{})}})}))}ngOnInit(){this.authService.getUserInfo().subscribe(t=>{this.currentUser=t}),this.getSkills()}get retrievePageState(){return this.paginationService.skillsPageState}}return t.\u0275fac=function(e){return new(e||t)(h.Sb(b.a),h.Sb(p.a),h.Sb(d.a))},t.\u0275cmp=h.Mb({type:t,selectors:[["app-table"]],decls:27,vars:10,consts:[[1,"top-controls"],[1,"title-1"],[1,"search-bar"],["type","text","placeholder","Search Skills",1,"search-input-bar","sub-title-6",3,"ngModel","ngModelChange","input","keyup.enter"],["type","button","value","Search",1,"button-search","pointer",3,"click"],[1,"flex-display"],[1,"items-selector"],[1,"sub-title-6","font-grey"],[1,"drop-down","sub-title-6",3,"ngModel","ngModelChange"],["class","drop-option",3,"ngValue",4,"ngFor","ngForOf"],["class","items-selector",4,"ngIf"],[4,"ngIf"],[1,"drop-option",3,"ngValue"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"sub-title-6"],[4,"ngFor","ngForOf"],["id","skill-pagination",1,"sub-title-6","text-centered",3,"pageChange"],["size","ls",1,"pointer",3,"icon","click"],["size","ls",3,"icon"],["class","no-records sub-title-6 text-centered",4,"ngIf"],["type","button","value","Add Skill",1,"button-xl","right-float","pointer","sub-title-6",3,"click"],[1,"no-records","sub-title-6","text-centered"]],template:function(t,e){1&t&&(h.Xb(0,"div",0),h.Xb(1,"h1",1),h.Ic(2,"Skills"),h.Wb(),h.Tb(3,"br"),h.Xb(4,"div",2),h.Xb(5,"input",3),h.ec("ngModelChange",(function(t){return e.retrievePageState.query=t}))("input",(function(t){return e.checkEmpty(t.target.value)}))("keyup.enter",(function(){return e.getSkills()})),h.Wb(),h.Xb(6,"input",4),h.ec("click",(function(){return e.getSkills()})),h.Wb(),h.Wb(),h.Ic(7," \xa0 \xa0 "),h.Xb(8,"div",5),h.Xb(9,"div",6),h.Xb(10,"h3",7),h.Ic(11," Sort "),h.Wb(),h.Xb(12,"select",8),h.ec("ngModelChange",(function(t){return e.changeSortOption(t)})),h.Gc(13,v,2,2,"option",9),h.Wb(),h.Wb(),h.Ic(14," \xa0 "),h.Xb(15,"div",6),h.Xb(16,"h3",7),h.Ic(17," Items \xa0 "),h.Wb(),h.Xb(18,"select",8),h.ec("ngModelChange",(function(t){return e.changeItemsCount(t)})),h.Gc(19,m,2,2,"option",9),h.Wb(),h.Wb(),h.Ic(20," \xa0 "),h.Gc(21,O,5,2,"div",10),h.Gc(22,U,5,2,"div",10),h.Wb(),h.Wb(),h.Tb(23,"br"),h.Gc(24,B,2,1,"ng-container",11),h.Gc(25,$,1,0,"app-loader",11),h.Gc(26,q,3,1,"ng-container",11)),2&t&&(h.Fb(5),h.nc("ngModel",e.retrievePageState.query),h.Fb(7),h.nc("ngModel",e.retrievePageState.sortOptions),h.Fb(1),h.nc("ngForOf",e.sortOptions),h.Fb(5),h.nc("ngModel",e.retrievePageState.itemsCount),h.Fb(1),h.nc("ngForOf",e.countOptions),h.Fb(2),h.nc("ngIf",(null==e.currentUser?null:e.currentUser.role)===e.Role.MANAGER),h.Fb(1),h.nc("ngIf",(null==e.currentUser?null:e.currentUser.role)===e.Role.RESOURCE),h.Fb(2),h.nc("ngIf",e.skillsUIModel),h.Fb(1),h.nc("ngIf",e.fetching),h.Fb(1),h.nc("ngIf",e.skillsUIModel))},directives:[g.b,g.l,g.n,g.r,n.l,n.m,g.o,g.s,f.c,S.a,k.a],pipes:[f.b],styles:[".color-grey[_ngcontent-%COMP%]{color:#70727d}.right-float[_ngcontent-%COMP%]{float:right}.items-selector[_ngcontent-%COMP%]{justify-content:center;align-items:baseline}"]}),t})();var Y=i("tyNb");let V=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Mb({type:t,selectors:[["app-skills"]],decls:2,vars:0,consts:[[1,"coda-content"]],template:function(t,e){1&t&&(h.Xb(0,"div",0),h.Tb(1,"router-outlet"),h.Wb())},directives:[Y.g],styles:[".right-float[_ngcontent-%COMP%]{float:right}.top-controls[_ngcontent-%COMP%]{margin-bottom:20px}"]}),t})();const K=[{path:"",component:V,children:[{path:"",component:_}]}];let L=(()=>{class t{}return t.\u0275mod=h.Qb({type:t}),t.\u0275inj=h.Pb({factory:function(e){return new(e||t)},imports:[[Y.f.forChild(K)],Y.f]}),t})();var J=i("PCNd"),z=i("Kb4U");let H=(()=>{class t{}return t.\u0275mod=h.Qb({type:t}),t.\u0275inj=h.Pb({factory:function(e){return new(e||t)},providers:[V],imports:[[n.c,L,S.b,g.h,f.a,J.a,z.b]]}),t})()}}]);