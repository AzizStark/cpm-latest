(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{y8AJ:function(t,e,n){"use strict";n.r(e),n.d(e,"ClientsModule",(function(){return rt}));var i=n("ofXK"),o=n("oOf3"),c=n("3Pt+"),r=n("Kb4U"),a=n("PCNd"),s=n("HWWf"),l=n("wHSu"),b=n("Tlzn"),p=n("HDdC"),d=n("Kj3r"),g=n("/uUt"),u=n("eIep"),h=n("s1z9"),f=n("PdH4"),m=n.n(f),v=n("fXoL"),C=n("sIYi"),M=n("tzGa"),x=n("tyNb"),P=n("Fkeu"),O=n("6NWb");function y(t,e){if(1&t&&(v.Xb(0,"span",32),v.Ic(1),v.Wb()),2&t){const t=v.hc(2);v.Fb(1),v.Kc("(",t.errors.clientName,")")}}function w(t,e){if(1&t&&(v.Xb(0,"span",32),v.Ic(1),v.Wb()),2&t){const t=v.hc(2);v.Fb(1),v.Kc("(",t.errors.about,")")}}function _(t,e){if(1&t){const t=v.Yb();v.Xb(0,"tag-input",33),v.ec("ngModelChange",(function(e){return v.Ac(t),v.hc(2).clientModel.projects=e}))("onRemove",(function(e){return v.Ac(t),v.hc(2).onProjectRemoved(e)})),v.Wb()}if(2&t){const t=v.hc(2);v.nc("ngModel",t.clientModel.projects)("hideForm",!0)("identifyBy","id")("displayBy","name")("ripple",!1)}}function I(t,e){1&t&&(v.Xb(0,"h1",34),v.Xb(1,"em"),v.Ic(2,"Search and add projects from "),v.Xb(3,"strong"),v.Ic(4," add projects "),v.Wb(),v.Ic(5," tab "),v.Wb(),v.Wb())}function j(t,e){if(1&t){const t=v.Yb();v.Xb(0,"div",38),v.Xb(1,"h1",39),v.Ic(2),v.Wb(),v.Xb(3,"button",40),v.ec("click",(function(){v.Ac(t);const n=e.$implicit;return v.hc(3).addProject(n.id,n.name)})),v.Tb(4,"fa-icon",41),v.Ic(5,"Add "),v.Wb(),v.Wb()}if(2&t){const t=e.$implicit,n=v.hc(3);v.Fb(2),v.Kc("",t.name," "),v.Fb(2),v.nc("icon",n.plusIcon)}}function k(t,e){if(1&t&&(v.Xb(0,"div",35),v.Xb(1,"div",36),v.Gc(2,j,6,2,"div",37),v.Wb(),v.Wb()),2&t){const t=v.hc(2);v.Fb(2),v.nc("ngForOf",t.suggestedProjects)}}function W(t,e){if(1&t){const t=v.Yb();v.Xb(0,"div",3),v.Xb(1,"div",4),v.Xb(2,"h1",5),v.Ic(3," Client Name "),v.Gc(4,y,2,1,"span",6),v.Wb(),v.Xb(5,"input",7),v.ec("ngModelChange",(function(e){return v.Ac(t),v.hc().clientModel.clientName=e})),v.Wb(),v.Tb(6,"br"),v.Xb(7,"h1",5),v.Ic(8," Description "),v.Gc(9,w,2,1,"span",6),v.Wb(),v.Xb(10,"textarea",8),v.ec("ngModelChange",(function(e){return v.Ac(t),v.hc().clientModel.about=e})),v.Wb(),v.Tb(11,"br"),v.Xb(12,"div",9),v.Xb(13,"div",10),v.Gc(14,_,1,5,"tag-input",11),v.Gc(15,I,6,0,"h1",12),v.Wb(),v.Wb(),v.Tb(16,"br"),v.Xb(17,"div",13),v.Xb(18,"h1",5),v.Ic(19," Client State "),v.Wb(),v.Xb(20,"input",14),v.ec("ngModelChange",(function(e){return v.Ac(t),v.hc().activity=e}))("click",(function(){return v.Ac(t),v.hc().onChangeActivity(!0)})),v.Wb(),v.Xb(21,"label",15),v.Ic(22,"Active"),v.Wb(),v.Tb(23,"br"),v.Xb(24,"input",16),v.ec("ngModelChange",(function(e){return v.Ac(t),v.hc().activity=e}))("click",(function(){return v.Ac(t),v.hc().onChangeActivity(!1)})),v.Wb(),v.Xb(25,"label",17),v.Ic(26,"Inactive"),v.Wb(),v.Tb(27,"br"),v.Wb(),v.Tb(28,"br"),v.Wb(),v.Xb(29,"div",18),v.Xb(30,"div",19),v.Xb(31,"div",20),v.Xb(32,"h1",21),v.Ic(33," Add projects "),v.Wb(),v.Wb(),v.Xb(34,"div",22),v.Xb(35,"div",23),v.Xb(36,"div",24),v.Xb(37,"div",25),v.Tb(38,"input",26),v.Wb(),v.Wb(),v.Xb(39,"h5",27),v.Xb(40,"em"),v.Ic(41,"Enter 3 or more characters to search"),v.Wb(),v.Wb(),v.Gc(42,k,3,1,"div",28),v.Wb(),v.Wb(),v.Wb(),v.Xb(43,"div",29),v.Xb(44,"input",30),v.ec("click",(function(){return v.Ac(t),v.hc().addClient()})),v.Wb(),v.Ic(45," \xa0\xa0 "),v.Xb(46,"input",31),v.ec("click",(function(){return v.Ac(t),v.hc().cancelConfirm()})),v.Wb(),v.Wb(),v.Wb(),v.Wb()}if(2&t){const t=v.hc();v.Fb(4),v.nc("ngIf",t.errors.clientName),v.Fb(1),v.nc("ngModel",t.clientModel.clientName),v.Fb(4),v.nc("ngIf",t.errors.about),v.Fb(1),v.nc("ngModel",t.clientModel.about),v.Fb(4),v.nc("ngIf",t.clientModel.projects.length>0),v.Fb(1),v.nc("ngIf",0===t.clientModel.projects.length),v.Fb(5),v.nc("ngModel",t.activity),v.Fb(4),v.nc("ngModel",t.activity),v.Fb(14),v.nc("formControl",t.projectSuggestFormControl),v.Fb(4),v.nc("ngIf",t.suggestedProjects&&t.suggestedProjects.length)}}let X=(()=>{class t{constructor(t,e,n,i,o){this.clientService=t,this.resourceService=e,this.router=n,this.route=i,this.projectService=o,this.checkIcon=l.d,this.crossicon=l.n,this.plusIcon=l.j,this.suggestedProjects=[],this.projectSuggestFormControl=new c.c,this.errors={isValid:!1,about:"",clientName:""},this.clientModel={clientName:"",about:"",isActive:!0,projects:[]},this.activity="Active",this.isEditMode=!1,this.preFillFields=t=>{this.clientModel={clientName:t.clientName,about:t.about,isActive:t.isActive,projects:t.projects.map(t=>({id:t.projectID,name:t.projectName}))},this.removeAddedProjects(this.clientModel.projects),this.setActivity()},this.setActivity=()=>{this.activity=this.clientModel.isActive?"Active":"InActive"},this.onChangeActivity=t=>{this.clientModel.isActive=t},this.addProject=(t,e)=>{this.clientModel.projects.push({id:t,name:e}),this.removeAddedProjects(this.clientModel.projects)},this.removeAddedProjects=t=>(t.forEach(t=>{this.suggestedProjects=this.suggestedProjects.filter(e=>e.id!==t.id)}),this.suggestedProjects),this.onProjectRemoved=t=>{this.suggestedProjects.push(t)},this.suggestProject=()=>{this.projectSuggestFormControl.valueChanges.pipe(Object(d.a)(500),Object(g.a)(),Object(u.a)(t=>this.projectSuggestFormControl.value.length>=3?this.projectService.getProjects(1,30,"name","true",this.projectSuggestFormControl.value):new p.a)).subscribe(t=>{const e=t.result.filter(t=>!Object.keys(t).includes("client"));this.suggestedProjects=e.map(t=>({id:t.projectID,name:t.projectName})),this.removeAddedProjects(this.clientModel.projects)})},this.cancelConfirm=()=>{m.a.fire({title:"There are unsaved changes, cancel now?",icon:"warning",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Back to Edit",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"}).then(t=>{t.isConfirmed&&this.router.navigate(["/clients"])})},this.convertToClientRequestModel=()=>{const t={clientName:this.clientModel.clientName,about:this.clientModel.about,projects:[],isActive:this.clientModel.isActive};return t.projects=this.clientModel.projects.length?this.clientModel.projects.map(t=>t.id):[],t},this.addClient=()=>{const t=this.convertToClientRequestModel(),e=Object(b.a)(t);this.errors=e,e.isValid&&(this.isEditMode?this.clientService.editClient(t,this.route.snapshot.params.client).subscribe(t=>{Object(h.a)(3e3,!0).fire({icon:"success",title:"Client details updated, redirecting now...",showConfirmButton:!0}).then(()=>{this.router.navigate(["/clients/"+this.route.snapshot.params.client])})}):this.clientService.addClient(t).subscribe(t=>{Object(h.a)(3e3,!0).fire({icon:"success",title:"New client created, redirecting now..",showConfirmButton:!0}).then(()=>{this.router.navigate(["/clients/"+t.id])})}))}}ngOnInit(){const t=this.route.snapshot.url;t.length>=2&&Number(this.route.snapshot.params.client)&&"edit"===t[1].path&&(this.isEditMode=!0,this.clientService.getClient(this.route.snapshot.params.client).subscribe(t=>{this.preFillFields(t)})),this.suggestProject()}}return t.\u0275fac=function(e){return new(e||t)(v.Sb(C.a),v.Sb(M.a),v.Sb(x.b),v.Sb(x.a),v.Sb(P.a))},t.\u0275cmp=v.Mb({type:t,selectors:[["app-client-alter"]],decls:6,vars:2,consts:[[1,"title-1"],[1,"time-bar"],["class","spaced-container",4,"ngIf"],[1,"spaced-container"],[1,"dynamic-input"],[1,"sub-title-6","font-grey","input-head"],["class","warning",4,"ngIf"],["type","text","placeholder","Enter client name","maxlength","35",1,"input-bar","sub-title-4",3,"ngModel","ngModelChange"],["maxlength","120","type","text","placeholder","Enter description",1,"input-bar","sub-title-4",3,"ngModel","ngModelChange"],[1,"skills-wrapper"],[1,"skills-container"],["ngDefaultControl","","theme","minimal-theme",3,"ngModel","hideForm","identifyBy","displayBy","ripple","ngModelChange","onRemove",4,"ngIf"],["class","sub-title-4 font-grey no-select",4,"ngIf"],[1,"flex-display","activity"],["type","radio","id","activity","name","activity","value","Active",3,"ngModel","ngModelChange","click"],["for","Active"],["type","radio","id","activity","name","activity","value","InActive",3,"ngModel","ngModelChange","click"],["for","InActive"],[1,"right-view"],[1,"tab-view"],[1,"tabs","flex-display"],["rel","add-projects",1,"sub-title-6","tab","pointer","cerulean-text","active"],[1,"time-bar","tab-container"],["id","add-projects",1,"tab-body"],[1,"top-controls"],[1,"search-bar"],["type","text","placeholder","Search Projects",1,"search-input-bar","sub-title-6",3,"formControl"],[1,"tool-tip-input"],["class","projects-wrapper wrapper",4,"ngIf"],[1,"full-width","flex-display"],["type","button","value","Save",1,"button-xl","pointer","sub-title-6","flex-occupy",3,"click"],["type","button","value","Cancel",1,"button-xl","pointer","sub-title-6","flex-occupy","warning",3,"click"],[1,"warning"],["ngDefaultControl","","theme","minimal-theme",3,"ngModel","hideForm","identifyBy","displayBy","ripple","ngModelChange","onRemove"],[1,"sub-title-4","font-grey","no-select"],[1,"projects-wrapper","wrapper"],[1,"project-container"],["class"," project flex-display",4,"ngFor","ngForOf"],[1,"project","flex-display"],[1,"sub-title-6"],["type","button",1,"add-button",3,"click"],["title","Add Project",1,"plus-icon",3,"icon"]],template:function(t,e){1&t&&(v.Vb(0),v.Xb(1,"h1",0),v.Ic(2),v.Wb(),v.Tb(3,"br"),v.Xb(4,"div",1),v.Gc(5,W,47,10,"div",2),v.Wb(),v.Ub()),2&t&&(v.Fb(2),v.Kc(" ",e.isEditMode?"Edit Client":"New Client"," "),v.Fb(3),v.nc("ngIf","resourceData.firstName"))},directives:[i.m,c.b,c.i,c.m,c.o,c.q,c.d,r.a,i.l,O.a],styles:[".input-bar[_ngcontent-%COMP%]{padding:6px;border-radius:8px;outline:none;font-family:Open sans;border:2px solid #efeaf9;color:#0b4870}.dynamic-input[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column}.dynamic-input[_ngcontent-%COMP%]   .client-input[_ngcontent-%COMP%]{justify-content:space-between;background-color:#efeaf9;border-radius:8px;padding:5px}.dynamic-input[_ngcontent-%COMP%]   .client-input[_ngcontent-%COMP%]   .cross-icon[_ngcontent-%COMP%]{transform:rotate(45deg);color:#eb6262;font-size:16px;transition:all .1s ease-in-out}.dynamic-input[_ngcontent-%COMP%]   .client-input[_ngcontent-%COMP%]   .cross-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1) rotate(45deg)}.dynamic-input[_ngcontent-%COMP%]   .resource-wrapper[_ngcontent-%COMP%]{max-height:150px;background-color:#efeaf9;border-radius:8px;padding:5px;overflow:auto}.dynamic-input[_ngcontent-%COMP%]   .resource-wrapper[_ngcontent-%COMP%]   .resource-container[_ngcontent-%COMP%]{overflow:hidden}.dynamic-input[_ngcontent-%COMP%]   .resource-wrapper[_ngcontent-%COMP%]   .resource-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent!important}.project[_ngcontent-%COMP%]{justify-content:space-between}.project[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{border:none;font-size:12px;color:#0b4870;background-color:#efeaf9;border-radius:4px;transition:all 80ms ease-in-out;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.project[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover{transform:scale(1.08);background-color:#e0d6f3}.project[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:focus{outline:none}.project[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{color:#0b4870;margin-right:4px;font-size:12px}.input-icon[_ngcontent-%COMP%]{padding:10px;background-color:#ffbe55;height:100%;font-size:18px;display:flex;justify-content:center;border-radius:8px;color:#fff;margin-left:10px;border:2px solid #ffbe55}.input-icons[_ngcontent-%COMP%]{visibility:hidden}.input-bar[_ngcontent-%COMP%]:hover{background-color:#efeaf9;transition:background-color .3s ease;border:2px solid #efeaf9}.input-bar[_ngcontent-%COMP%]:focus{border:2px solid #efeaf9;background-color:#fdfdfd}.hideIt[_ngcontent-%COMP%]{visibility:visible}.cerulean-text[_ngcontent-%COMP%]{color:#0b4870}textarea[_ngcontent-%COMP%]{resize:none}.input-box-container[_ngcontent-%COMP%]{position:relative}.input-box[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;border:1px solid #efeaf9;font-size:16px}.input-no-style[_ngcontent-%COMP%]{border:none;outline:none;background-color:initial;padding:0;margin:0;width:100%}.input-head[_ngcontent-%COMP%]{margin-bottom:6px;margin-left:2px}.items-selector[_ngcontent-%COMP%]{border:2px solid #efeaf9;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto;border-radius:0 0 8px 8px}.tab-view[_ngcontent-%COMP%]{flex:1;background-color:#efeaf9;padding:10px;margin-bottom:12px;border-radius:10px}.tab-view[_ngcontent-%COMP%]   .tab-body[_ngcontent-%COMP%]   .search-tip[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:70px;text-align:center;color:#e6def6;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tab-view[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{background-color:#efeaf9;padding:8px 0;margin:0}.tab-view[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background-color:#fff}.spaced-container[_ngcontent-%COMP%]{flex-direction:row}.spaced-container[_ngcontent-%COMP%]   .skills-wrapper[_ngcontent-%COMP%]{border-radius:8px;max-height:100px;overflow:auto}.spaced-container[_ngcontent-%COMP%]   .skills-wrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent!important}.tool-tip-input[_ngcontent-%COMP%]{margin-left:12px;margin-top:-8px;margin-bottom:15px;color:#d2d2d2}.client[_ngcontent-%COMP%]{padding-left:4px}.tab[_ngcontent-%COMP%]{background-color:#fff;padding:8px;border-radius:8px 8px 0 0;width:100%;text-align:center;margin:2px 2px 0;z-index:10}.top-controls[_ngcontent-%COMP%]{width:100%;align-self:center;margin-top:22px}.search-bar[_ngcontent-%COMP%]{border:5px solid #efeaf9;border-radius:8px;background-color:#efeaf9;padding:0;margin:10px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#0b4870}.wrapper[_ngcontent-%COMP%]{padding:3px;margin:10px;overflow:auto}.right-view[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:12px;justify-content:space-between;height:calc(100vh - 180px)}@media only screen and (max-width:1024px){.spaced-container[_ngcontent-%COMP%]{flex-direction:column}.dynamic-input[_ngcontent-%COMP%]{width:100%}.right-view[_ngcontent-%COMP%]{margin-left:0}.search-bar[_ngcontent-%COMP%]{width:-webkit-fill-available}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#efeaf9}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffbe55;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffc971}  tag-input .ng2-tag-input.minimal-theme{padding:.25em}  tag-input .ng2-tag-input.minimal-theme tag delete-icon path{fill:#0b4870!important}  tag-input .ng2-tag-input.minimal-theme{z-index:0;border-bottom:none}  tag-input .ng2-tag-input.minimal-theme tag{display:flex;flex-direction:row;flex-wrap:wrap;color:#0b4870;border-radius:8px;background:#fff;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative;font-family:Open sans!important}  tag-input .ng2-tag-input.minimal-theme tag:not(.readonly):not(.tag--editing):active,   tag-input .ng2-tag-input.minimal-theme tag:not(.readonly):not(.tag--editing):focus,   tag-input .ng2-tag-input.minimal-theme tag:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#fdfdfd;color:#29315a}  tag-input .ng2-tag-input.minimal-theme tag.readonly{cursor:default}  tag-input .ng2-tag-input.minimal-theme tag.readonly:focus,   tag-input .ng2-tag-input.minimal-theme tag:focus{outline:0}  tag-input .ng2-tag-input.minimal-theme tag.tag--editing{cursor:text}.warning[_ngcontent-%COMP%]{color:#fff;padding:0 4px}.activity[_ngcontent-%COMP%]{font-family:Open sans;align-items:center}.activity[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 15px 0 0}.activity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:4px 5px 0 0}.activity[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:4px 8px 0 0;color:#0b4870}"]}),t})();var S=n("kh4u"),F=n("c9Ax"),A=n("o7am");function N(t,e){if(1&t){const t=v.Yb();v.Xb(0,"div",13),v.Xb(1,"input",14),v.ec("click",(function(){return v.Ac(t),v.hc(2).editRedirect()})),v.Wb(),v.Ic(2," \xa0\xa0 "),v.Xb(3,"input",15),v.ec("click",(function(){return v.Ac(t),v.hc(2).deleteConfirm()})),v.Wb(),v.Wb()}}function T(t,e){1&t&&(v.Xb(0,"h3",16),v.Ic(1,"No projects assigned"),v.Wb())}function G(t,e){if(1&t&&(v.Xb(0,"h1",20),v.Ic(1),v.Wb()),2&t){const t=e.$implicit;v.Fb(1),v.Kc(" ",t.projectName," ")}}function U(t,e){if(1&t&&(v.Xb(0,"div",17),v.Xb(1,"div",18),v.Gc(2,G,2,1,"h1",19),v.Wb(),v.Wb()),2&t){const t=v.hc(2);v.Fb(2),v.nc("ngForOf",t.client.projects)}}function R(t,e){if(1&t){const t=v.Yb();v.Xb(0,"input",21),v.ec("click",(function(){return v.Ac(t),v.hc(2).editRedirect()})),v.Wb()}}function B(t,e){if(1&t&&(v.Vb(0),v.Xb(1,"h1",1),v.Ic(2),v.Wb(),v.Tb(3,"br"),v.Xb(4,"div",2),v.Xb(5,"div",3),v.Xb(6,"div",4),v.Xb(7,"div",5),v.Xb(8,"h1",6),v.Xb(9,"span",7),v.Ic(10," ID: "),v.Wb(),v.Ic(11),v.Wb(),v.Xb(12,"h1",8),v.Xb(13,"span",7),v.Ic(14,"Client Name: "),v.Wb(),v.Ic(15),v.Wb(),v.Xb(16,"h1",8),v.Xb(17,"span",7),v.Ic(18," Description: "),v.Wb(),v.Ic(19),v.Wb(),v.Tb(20,"br"),v.Wb(),v.Gc(21,N,4,0,"div",9),v.Wb(),v.Tb(22,"br"),v.Tb(23,"br"),v.Xb(24,"h3",6),v.Ic(25," Projects "),v.Wb(),v.Tb(26,"br"),v.Gc(27,T,2,0,"h3",10),v.Gc(28,U,3,1,"div",11),v.Gc(29,R,1,0,"input",12),v.Wb(),v.Wb(),v.Ub()),2&t){const t=v.hc();v.Fb(2),v.Lc(" Client: ",t.client.clientName," #",t.client.clientID,""),v.Fb(9),v.Kc(" ",t.client.clientID,""),v.Fb(4),v.Kc(" ",t.client.clientName,""),v.Fb(4),v.Kc(" ",t.client.about,""),v.Fb(2),v.nc("ngIf",(null==t.currentUser?null:t.currentUser.role)===t.Role.MANAGER),v.Fb(6),v.nc("ngIf",!t.client.projects.length),v.Fb(1),v.nc("ngIf",t.client.projects.length),v.Fb(1),v.nc("ngIf",(null==t.currentUser?null:t.currentUser.role)===t.Role.MANAGER)}}function z(t,e){1&t&&v.Tb(0,"app-loader")}let E=(()=>{class t{constructor(t,e,n,i){this.route=t,this.clientsService=e,this.router=n,this.authService=i,this.Role=S.a,this.fetching=!0,this.deleteConfirm=()=>{m.a.fire({title:"Are you sure you want to delete?",text:"This process cannot be undone!",icon:"warning",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Yes",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"}).then(t=>{t.isConfirmed&&this.clientsService.deleteClient(this.route.snapshot.params.client).subscribe(t=>{Object(h.a)(3e3,!0).fire({icon:"success",title:"Client deleted successfully, redirecting now..",showConfirmButton:!0}).then(()=>{this.router.navigate(["/clients"])})})})},this.editRedirect=()=>{this.router.navigate(["/clients/"+this.route.snapshot.params.client+"/edit"])}}ngOnInit(){this.authService.getUserInfo().subscribe(t=>{this.currentUser=t}),this.fetching=!0,this.clientsService.getClient(this.route.snapshot.params.client).subscribe(t=>{this.fetching=!1,this.client=t})}}return t.\u0275fac=function(e){return new(e||t)(v.Sb(x.a),v.Sb(C.a),v.Sb(x.b),v.Sb(F.a))},t.\u0275cmp=v.Mb({type:t,selectors:[["app-client-view"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"title-1"],[1,"time-bar"],[1,"spaced-container"],[1,"flex-pad"],[1,"profile-container"],[1,"sub-title-2"],[1,"font-grey"],[1,"sub-title-2","word-break"],["class","flex-display",4,"ngIf"],["class","no-projects sub-title-6 font-grey text-centered",4,"ngIf"],["class","projects-wrapper",4,"ngIf"],["class","button-xl pointer sub-title-6 flex-occupy","type","button","value","Add / Remove Projects",3,"click",4,"ngIf"],[1,"flex-display"],["type","button","value","Edit",1,"button-xl","pointer","sub-title-6",3,"click"],["type","button","value","Delete",1,"button-xl","pointer","sub-title-6","warning",3,"click"],[1,"no-projects","sub-title-6","font-grey","text-centered"],[1,"projects-wrapper"],[1,"project-container"],["class","sub-title-4 project",4,"ngFor","ngForOf"],[1,"sub-title-4","project"],["type","button","value","Add / Remove Projects",1,"button-xl","pointer","sub-title-6","flex-occupy",3,"click"]],template:function(t,e){1&t&&(v.Gc(0,B,30,9,"ng-container",0),v.Gc(1,z,1,0,"app-loader",0)),2&t&&(v.nc("ngIf",e.client),v.Fb(1),v.nc("ngIf",e.fetching))},directives:[i.m,i.l,A.a],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#efeaf9}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffbe55;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffc971}.flex-pad[_ngcontent-%COMP%]{display:flex;padding:10px}.profile-picture[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:cover;border-radius:100px}.profile-container[_ngcontent-%COMP%]{display:flex;width:70%}.flex-display[_ngcontent-%COMP%], .profile-container[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.flex-display[_ngcontent-%COMP%]{width:20%;margin-left:auto}.no-projects[_ngcontent-%COMP%]{padding:2%}@media only screen and (max-width:1024px){.flex-pad[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.flex-pad[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]{width:150px;height:150px}.flex-pad[_ngcontent-%COMP%]   .profile-container[_ngcontent-%COMP%]{padding-top:10px;padding-left:0;text-align:center}.flex-display[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:center}.flex-display[_ngcontent-%COMP%]   .button-xl[_ngcontent-%COMP%]{width:50%}}"]}),t})();var L=n("MFUF"),D=n("Y1Tt");function K(t,e){if(1&t&&(v.Xb(0,"option",13),v.Ic(1),v.Wb()),2&t){const t=e.$implicit;v.nc("ngValue",t),v.Fb(1),v.Kc(" ",t," ")}}function q(t,e){if(1&t&&(v.Xb(0,"option",13),v.Ic(1),v.Wb()),2&t){const t=e.$implicit;v.nc("ngValue",t),v.Fb(1),v.Kc(" ",t," ")}}function V(t,e){if(1&t&&(v.Xb(0,"option",13),v.Ic(1),v.Wb()),2&t){const t=e.$implicit;v.nc("ngValue",t),v.Fb(1),v.Kc(" ",t," ")}}const Y=function(t){return{"appcard-no-side-bar":t}};function $(t,e){if(1&t&&(v.Xb(0,"div",17),v.Tb(1,"ngx-avatar",18),v.Xb(2,"div",19),v.Xb(3,"span",20),v.Ic(4),v.Wb(),v.Xb(5,"span",21),v.Ic(6),v.Wb(),v.Wb(),v.Wb()),2&t){const t=e.$implicit,n=e.index,i=v.hc(2);v.Hb("appcard ",(n+1)%4==0?"last-card":"",""),v.nc("routerLink",t.clientID)("ngClass",v.rc(9,Y,!i.isSidebarVisible)),v.Fb(1),v.oc("name",t.clientName),v.nc("title",t.clientName),v.Fb(3),v.Jc(t.clientName),v.Fb(2),v.Kc("Total Projects: ",t.projects.length,"")}}const H=function(t,e,n){return{id:"client-pagination",itemsPerPage:t,currentPage:e,totalItems:n}};function J(t,e){if(1&t){const t=v.Yb();v.Xb(0,"div"),v.Xb(1,"div",14),v.Gc(2,$,7,11,"div",15),v.ic(3,"paginate"),v.Wb(),v.Xb(4,"pagination-controls",16),v.ec("pageChange",(function(e){return v.Ac(t),v.hc().changePage(e)})),v.Wb(),v.Wb()}if(2&t){const t=v.hc();v.Fb(2),v.nc("ngForOf",v.kc(3,1,t.clientsUIModel,v.tc(4,H,t.retrievePageState.itemsCount,t.retrievePageState.pageNumber,t.totalItems)))}}function Q(t,e){1&t&&v.Tb(0,"app-loader")}function Z(t,e){1&t&&(v.Xb(0,"div",22),v.Xb(1,"strong"),v.Ic(2,"No records found!"),v.Wb(),v.Wb())}function tt(t,e){1&t&&v.Tb(0,"input",23),2&t&&v.nc("routerLink","add")}let et=(()=>{class t{constructor(t,e,n,i){this.clientService=t,this.paginationService=e,this.authService=n,this.sidebarService=i,this.downIcon=l.b,this.leftIcon=l.c,this.expandedIndex=-1,this.Role=S.a,this.clientsUIModel=[],this.fetching=!0,this.searchQuery="",this.countOptions=[16,32,48],this.sortOptions=["Client ID","Client Name"],this.activeOptions=["All","Active","Inactive"],this.totalItems=30,this.getClientsList=()=>{this.fetching=!0,this.clientService.getClients(this.retrievePageState.pageNumber,this.retrievePageState.itemsCount,this.retrievePageState.sortOptions,this.retrievePageState.activeOptions,this.retrievePageState.query).subscribe(t=>{this.fetching=!1;const e=[];t.result.forEach(t=>{e.push(this.prepareClientUIModel(t))}),this.totalItems=t.totalPages*this.retrievePageState.itemsCount,this.clientsUIModel=e,this.clients=t.result},t=>{throw this.fetching=!1,this.clientsUIModel=[],t})},this.prepareClientUIModel=t=>({clientID:t.clientID,clientName:t.clientName,projects:t.projects,icon:l.r}),this.changePage=t=>{this.changePageState({id:"client-pagination",pageNumber:t,itemsCount:this.retrievePageState.itemsCount,sortOptions:this.retrievePageState.sortOptions,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getClientsList()},this.changeItemsCount=t=>{this.changePageState({id:"client-pagination",pageNumber:1,itemsCount:t,sortOptions:this.retrievePageState.sortOptions,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getClientsList()},this.checkEmpty=t=>{this.searchQuery=t,""===t&&this.getClientsList()},this.changeSortOption=t=>{this.changePageState({id:"client-pagination",pageNumber:1,itemsCount:this.retrievePageState.itemsCount,sortOptions:t,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getClientsList()},this.changeActiveOption=t=>{this.changePageState({id:"client-pagination",pageNumber:1,itemsCount:this.retrievePageState.itemsCount,sortOptions:this.retrievePageState.sortOptions,activeOptions:t,query:this.retrievePageState.query}),this.getClientsList()},this.changePageState=t=>{this.paginationService.setClientsPageState(t)}}ngOnInit(){this.authService.getUserInfo().subscribe(t=>{this.currentUser=t}),this.getClientsList()}get isSidebarVisible(){return this.sidebarService.isSidebarVisible}get retrievePageState(){return this.paginationService.clientPageState}}return t.\u0275fac=function(e){return new(e||t)(v.Sb(C.a),v.Sb(L.a),v.Sb(F.a),v.Sb(D.a))},t.\u0275cmp=v.Mb({type:t,selectors:[["app-clients-card"]],decls:31,vars:11,consts:[[1,"top-controls"],[1,"title-1"],[1,"search-bar"],["type","text","placeholder","Search clients",1,"search-input-bar","sub-title-6",3,"ngModel","keyup.enter","ngModelChange","input"],["type","button","value","Search",1,"button-search","pointer",3,"click"],[1,"flex-display"],[1,"items-selector"],[1,"sub-title-6","font-grey"],[1,"drop-down","sub-title-6",3,"ngModel","ngModelChange"],["class","drop-option",3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],["class","no-records sub-title-6 text-centered",4,"ngIf"],["class","button-xl right-float pointer sub-title-6","type","button","value","Add Client",3,"routerLink",4,"ngIf"],[1,"drop-option",3,"ngValue"],[1,"stack-row"],[3,"class","routerLink","ngClass",4,"ngFor","ngForOf"],["id","client-pagination",1,"sub-title-6","text-centered",3,"pageChange"],[3,"routerLink","ngClass"],["bgColor","#ffbe55","fgColor","#ffffff","size","70",3,"title","name"],[1,"profile-container"],[1,"client-name"],[1,"project-count","sub-title-4"],[1,"no-records","sub-title-6","text-centered"],["type","button","value","Add Client",1,"button-xl","right-float","pointer","sub-title-6",3,"routerLink"]],template:function(t,e){1&t&&(v.Xb(0,"div",0),v.Xb(1,"h1",1),v.Ic(2," Clients "),v.Wb(),v.Tb(3,"br"),v.Xb(4,"div",2),v.Xb(5,"input",3),v.ec("keyup.enter",(function(){return e.getClientsList()}))("ngModelChange",(function(t){return e.retrievePageState.query=t}))("input",(function(t){return e.checkEmpty(t.target.value)})),v.Wb(),v.Xb(6,"input",4),v.ec("click",(function(){return e.getClientsList()})),v.Wb(),v.Wb(),v.Ic(7," \xa0\xa0 "),v.Xb(8,"div",5),v.Xb(9,"div",6),v.Xb(10,"h3",7),v.Ic(11," Sort "),v.Wb(),v.Xb(12,"select",8),v.ec("ngModelChange",(function(t){return e.changeSortOption(t)})),v.Gc(13,K,2,2,"option",9),v.Wb(),v.Wb(),v.Ic(14," \xa0 "),v.Xb(15,"div",6),v.Xb(16,"h3",7),v.Ic(17," Items \xa0 "),v.Wb(),v.Xb(18,"select",8),v.ec("ngModelChange",(function(t){return e.changeItemsCount(t)})),v.Gc(19,q,2,2,"option",9),v.Wb(),v.Wb(),v.Ic(20," \xa0 "),v.Xb(21,"div",6),v.Xb(22,"h3",7),v.Ic(23," Show \xa0 "),v.Wb(),v.Xb(24,"select",8),v.ec("ngModelChange",(function(t){return e.changeActiveOption(t)})),v.Gc(25,V,2,2,"option",9),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Xb(26,"div"),v.Gc(27,J,5,8,"div",10),v.Gc(28,Q,1,0,"app-loader",10),v.Gc(29,Z,3,0,"div",11),v.Gc(30,tt,1,1,"input",12),v.Wb()),2&t&&(v.Fb(5),v.nc("ngModel",e.retrievePageState.query),v.Fb(7),v.nc("ngModel",e.retrievePageState.sortOptions),v.Fb(1),v.nc("ngForOf",e.sortOptions),v.Fb(5),v.nc("ngModel",e.retrievePageState.itemsCount),v.Fb(1),v.nc("ngForOf",e.countOptions),v.Fb(5),v.nc("ngModel",e.retrievePageState.activeOptions),v.Fb(1),v.nc("ngForOf",e.activeOptions),v.Fb(2),v.nc("ngIf",!e.fetching&&e.clientsUIModel.length),v.Fb(1),v.nc("ngIf",e.fetching),v.Fb(1),v.nc("ngIf",!e.clientsUIModel.length&&!e.fetching),v.Fb(1),v.nc("ngIf",(null==e.currentUser?null:e.currentUser.role)===e.Role.MANAGER))},directives:[c.b,c.m,c.o,c.s,i.l,i.m,c.p,c.t,o.c,x.c,i.k,s.a,A.a],pipes:[o.b],styles:['.right-float[_ngcontent-%COMP%]{float:right}.stack-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;box-sizing:border-box;justify-content:space-between;margin:10px 0 30px}.stack-row[_ngcontent-%COMP%]:after{content:"";flex:0 0 24%}.profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding-left:20px;font-size:20px;font-weight:500;color:#0b4870}.profile-container[_ngcontent-%COMP%]   .project-count[_ngcontent-%COMP%]{font-size:15px;margin-top:7px}.appcard[_ngcontent-%COMP%]{display:flex;margin-top:1.5%;box-sizing:border-box;overflow:hidden;flex-basis:24%;background:#fff;padding:1%;border-radius:8px}.appcard[_ngcontent-%COMP%]:hover{cursor:pointer}.appcard[_ngcontent-%COMP%]:focus{outline:0;box-shadow:none!important}.last-card[_ngcontent-%COMP%]{margin-right:0}.client-name[_ngcontent-%COMP%]{text-overflow:ellipsis;max-width:12vw;white-space:nowrap;overflow:hidden}@media only screen and (max-width:600px){.stack-row[_ngcontent-%COMP%]{flex-direction:column!important;flex-wrap:wrap}.appcard[_ngcontent-%COMP%]{margin-top:10px;max-width:100%}.client-name[_ngcontent-%COMP%]{max-width:60vw}}']}),t})(),nt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Mb({type:t,selectors:[["app-clients"]],decls:2,vars:0,consts:[[1,"coda-content"]],template:function(t,e){1&t&&(v.Xb(0,"div",0),v.Tb(1,"router-outlet"),v.Wb())},directives:[x.g],styles:[""]}),t})();var it=n("r+kj");const ot=[{path:"",component:nt,children:[{path:"",component:et},{path:"add",component:X,canActivate:[it.a],data:{roles:[S.a.MANAGER]}},{path:":client",component:E},{path:":client/edit",component:X,canActivate:[it.a],data:{roles:[S.a.MANAGER]}}]}];let ct=(()=>{class t{}return t.\u0275mod=v.Qb({type:t}),t.\u0275inj=v.Pb({factory:function(e){return new(e||t)},imports:[[x.f.forChild(ot)],x.f]}),t})(),rt=(()=>{class t{}return t.\u0275mod=v.Qb({type:t}),t.\u0275inj=v.Pb({factory:function(e){return new(e||t)},imports:[[i.c,ct,c.h,c.r,o.a,r.b,a.a,O.b,s.b]]}),t})()}}]);