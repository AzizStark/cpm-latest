(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{KyM8:function(t,e,i){"use strict";i.r(e),i.d(e,"SkillsModule",(function(){return q}));var n=i("ofXK"),s=i("mrSG"),c=i("wHSu"),o=i("PdH4"),l=i.n(o),r=i("s1z9"),a=i("fXoL"),u=i("LRrx"),b=i("MFUF"),h=i("3Pt+"),p=i("oOf3"),d=i("6NWb"),g=i("o7am");function f(t,e){if(1&t&&(a.Xb(0,"option",11),a.Ic(1),a.Wb()),2&t){const t=e.$implicit;a.nc("ngValue",t),a.Fb(1),a.Kc(" ",t," ")}}function k(t,e){if(1&t&&(a.Xb(0,"option",11),a.Ic(1),a.Wb()),2&t){const t=e.$implicit;a.nc("ngValue",t),a.Fb(1),a.Kc(" ",t," ")}}function S(t,e){if(1&t&&(a.Xb(0,"option",11),a.Ic(1),a.Wb()),2&t){const t=e.$implicit;a.nc("ngValue",t),a.Fb(1),a.Kc(" ",t," ")}}function m(t,e){1&t&&(a.Xb(0,"th"),a.Ic(1,"Number of Resources"),a.Wb())}function v(t,e){if(1&t&&(a.Xb(0,"td"),a.Ic(1),a.Wb()),2&t){const t=a.hc().$implicit;a.Fb(1),a.Jc(t.totalResources)}}function I(t,e){if(1&t){const t=a.Yb();a.Xb(0,"td"),a.Xb(1,"fa-icon",17),a.ec("click",(function(){a.Ac(t);const e=a.hc().$implicit;return a.hc(3).fireModel("edit",e)})),a.Wb(),a.Wb()}if(2&t){const t=a.hc(4);a.Fb(1),a.nc("icon",t.editIcon)}}function P(t,e){if(1&t){const t=a.Yb();a.Xb(0,"td"),a.Xb(1,"fa-icon",17),a.ec("click",(function(){a.Ac(t);const e=a.hc().$implicit;return a.hc(3).deleteSkill(e)})),a.Wb(),a.Wb()}if(2&t){const t=a.hc(4);a.Fb(1),a.nc("icon",t.deleteIcon)}}function O(t,e){if(1&t){const t=a.Yb();a.Xb(0,"td"),a.Xb(1,"fa-icon",17),a.ec("click",(function(){a.Ac(t);const e=a.hc().$implicit;return a.hc(3).approveSkill(e)})),a.Wb(),a.Wb()}if(2&t){const t=a.hc(4);a.Fb(1),a.nc("icon",t.checkIcon)}}function X(t,e){if(1&t){const t=a.Yb();a.Xb(0,"td"),a.Xb(1,"fa-icon",17),a.ec("click",(function(){a.Ac(t);const e=a.hc().$implicit;return a.hc(3).rejectSkill(e)})),a.Wb(),a.Wb()}if(2&t){const t=a.hc(4);a.Fb(1),a.nc("icon",t.crossicon)}}function y(t,e){if(1&t&&(a.Xb(0,"tr"),a.Xb(1,"td"),a.Ic(2),a.Wb(),a.Xb(3,"td"),a.Ic(4),a.Wb(),a.Xb(5,"td"),a.Ic(6),a.Wb(),a.Gc(7,v,2,1,"td",10),a.Xb(8,"td"),a.Ic(9),a.Wb(),a.Gc(10,I,2,1,"td",10),a.Gc(11,P,2,1,"td",10),a.Gc(12,O,2,1,"td",10),a.Gc(13,X,2,1,"td",10),a.Wb()),2&t){const t=e.$implicit,i=a.hc(3);a.Fb(2),a.Jc(t.skillID),a.Fb(2),a.Jc(t.skillName),a.Fb(2),a.Jc(t.description),a.Fb(1),a.nc("ngIf",i.approved),a.Fb(2),a.Jc(t.user.firstName+" "+t.user.lastName),a.Fb(1),a.nc("ngIf",i.approved),a.Fb(1),a.nc("ngIf",i.approved),a.Fb(1),a.nc("ngIf",!i.approved),a.Fb(1),a.nc("ngIf",!i.approved)}}const W=function(t,e,i){return{id:"skill-pagination",itemsPerPage:t,currentPage:e,totalItems:i}};function w(t,e){if(1&t){const t=a.Yb();a.Xb(0,"div",13),a.Xb(1,"table",14),a.Xb(2,"thead"),a.Xb(3,"th"),a.Ic(4,"ID"),a.Wb(),a.Xb(5,"th"),a.Ic(6,"Skill Name"),a.Wb(),a.Xb(7,"th"),a.Ic(8,"Description"),a.Wb(),a.Gc(9,m,2,0,"th",10),a.Xb(10,"th"),a.Ic(11,"Skill Requested By"),a.Wb(),a.Tb(12,"th"),a.Tb(13,"th"),a.Wb(),a.Xb(14,"tbody"),a.Gc(15,y,14,9,"tr",15),a.ic(16,"paginate"),a.Wb(),a.Tb(17,"tbody"),a.Wb(),a.Xb(18,"pagination-controls",16),a.ec("pageChange",(function(e){return a.Ac(t),a.hc(2).changePage(e)})),a.Wb(),a.Tb(19,"br"),a.Wb()}if(2&t){const t=a.hc(2);a.Fb(9),a.nc("ngIf",t.approved),a.Fb(6),a.nc("ngForOf",a.kc(16,2,t.skillsUIModel,a.tc(5,W,t.retrievePageState.itemsCount,t.retrievePageState.pageNumber,t.totalItems)))}}function C(t,e){if(1&t&&(a.Vb(0),a.Gc(1,w,20,9,"div",12),a.Ub()),2&t){const t=a.hc();a.Fb(1),a.nc("ngIf",!t.fetching&&t.skillsUIModel.length)}}function F(t,e){1&t&&a.Tb(0,"app-loader")}function M(t,e){1&t&&(a.Xb(0,"div",20),a.Xb(1,"strong"),a.Ic(2,"No records found!"),a.Wb(),a.Wb())}function N(t,e){if(1&t){const t=a.Yb();a.Vb(0),a.Gc(1,M,3,0,"div",18),a.Xb(2,"input",19),a.ec("click",(function(){return a.Ac(t),a.hc().fireModel("add",{})})),a.Wb(),a.Ub()}if(2&t){const t=a.hc();a.Fb(1),a.nc("ngIf",!t.skillsUIModel.length&&!t.fetching)}}let x=(()=>{class t{constructor(t,e){this.skillsService=t,this.paginationService=e,this.editIcon=c.i,this.deleteIcon=c.n,this.checkIcon=c.d,this.crossicon=c.m,this.countOptions=[10,20,40],this.sortOptions=["Skill ID","Skill Name"],this.activeOptions=["Organisational","Unapproved"],this.totalItems=20,this.approved=!0,this.fetching=!0,this.isMsgBoxVisible=!1,this.editOption={title:"",button:""},this.selectedSkill={skillID:0,skillName:"",description:"",totalResources:0},this.getSkills=()=>{this.fetching=!0,this.skillsService.getSkills(this.retrievePageState.pageNumber,this.retrievePageState.itemsCount,this.retrievePageState.sortOptions,this.retrievePageState.activeOptions,this.retrievePageState.query).subscribe(t=>{this.fetching=!1,this.totalItems=t.totalItems,this.skillsUIModel=t.result},t=>{this.fetching=!1,this.skillsUIModel=[]})},this.changePage=t=>{this.changePageState({id:"skill-pagination",pageNumber:t,itemsCount:this.retrievePageState.itemsCount,sortOptions:this.retrievePageState.sortOptions,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getSkills()},this.checkEmpty=t=>{""===t&&this.getSkills()},this.addSkill=()=>Object(s.a)(this,void 0,void 0,(function*(){const t={user_id:3,user_type:1,name:this.selectedSkill.skillName,description:this.selectedSkill.description};return new Promise((e,i)=>{this.skillsService.createSkill(t).toPromise().then(t=>{e(),Object(r.a)().fire({icon:"success",title:this.selectedSkill.skillName+" added succesfully!"}),this.getSkills()})})})),this.updateSkill=()=>Object(s.a)(this,void 0,void 0,(function*(){const t={skillID:this.selectedSkill.skillID,userTypeId:1,skillName:this.selectedSkill.skillName,description:this.selectedSkill.description};return new Promise((e,i)=>{this.skillsService.updateSkill(t).toPromise().then(t=>{e(),Object(r.a)().fire({icon:"success",title:"Skill updated succesfully!"}),this.getSkills()})})})),this.resetSkill=()=>{this.selectedSkill={skillID:0,skillName:"",description:"",totalResources:0}},this.approveSkill=t=>{l.a.fire({title:"Approve Skill ?",text:"Do you want to approve this skill?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:"sa-warn",showLoaderOnConfirm:!0,preConfirm:e=>{if(e){const e={skill_id:t.skillID,user_type:1};return new Promise((t,i)=>{this.skillsService.approveSkill(e).toPromise().then(e=>{t(),this.getSkills()})}).then(t=>{})}}})},this.rejectSkill=t=>{l.a.fire({title:"Reject Skill ?",text:"Do you want to reject this skill?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:"sa-warn",showLoaderOnConfirm:!0,preConfirm:e=>{if(e){const e={skill_id:t.skillID,user_type:1,user_id:3};return new Promise((t,i)=>{this.skillsService.rejectSkill(e).toPromise().then(e=>{t(),this.getSkills()})}).then(t=>{})}}})},this.deleteSkill=t=>{l.a.fire({title:"Delete Skill ?",text:"This process cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",customClass:"sa-warn",showLoaderOnConfirm:!0,preConfirm:e=>{if(e){const e={skillID:t.skillID,userTypeId:1};return new Promise((t,i)=>{this.skillsService.deleteSkill(e).toPromise().then(e=>{t(),this.getSkills()})}).then(t=>{})}}})},this.changeItemsCount=t=>{this.changePageState({id:"skill-pagination",pageNumber:1,itemsCount:t,sortOptions:this.retrievePageState.sortOptions,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getSkills()},this.changeSortOption=t=>{this.changePageState({id:"skill-pagination",pageNumber:1,itemsCount:this.retrievePageState.itemsCount,sortOptions:t,activeOptions:this.retrievePageState.activeOptions,query:this.retrievePageState.query}),this.getSkills()},this.changeActiveOption=t=>{this.approved="Unapproved"!==t,this.changePageState({id:"skill-pagination",pageNumber:1,itemsCount:this.retrievePageState.itemsCount,sortOptions:this.retrievePageState.sortOptions,activeOptions:t,query:this.retrievePageState.query}),this.getSkills()},this.changePageState=t=>{this.paginationService.setSkillsPageState(t)},this.fireModel=(t="add",e)=>Object(s.a)(this,void 0,void 0,(function*(){let i="";"add"===t?i='<input id="swal-input1" class="swal2-input input-bar" placeholder = "Skill Name"><input id="swal-input2" class="swal2-input input-bar" placeholder = "Description">':"edit"===t&&(i=`<input id="swal-input1" class="swal2-input input-bar" placeholder = "Skill Name" value = "${e.skillName}"><input id="swal-input2" class="swal2-input input-bar" placeholder = "Description" value = "${e.description}">`),yield l.a.fire({customClass:"skill-dialog",title:"add"===t?"Add Skill":"Update Skill",html:i,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"add"===t?"Add":"Update",showLoaderOnConfirm:!0,allowOutsideClick:()=>!l.a.isLoading(),preConfirm:()=>{const i=document.getElementById("swal-input1").value,n=document.getElementById("swal-input2").value;return this.selectedSkill.skillName=i,this.selectedSkill.description=n,"edit"===t?(this.selectedSkill.skillID=e.skillID,this.updateSkill().then(t=>{})):this.addSkill().then(t=>{})}})}))}ngOnInit(){this.getSkills()}get retrievePageState(){return this.paginationService.skillsPageState}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(u.a),a.Sb(b.a))},t.\u0275cmp=a.Mb({type:t,selectors:[["app-table"]],decls:30,vars:10,consts:[[1,"top-controls"],[1,"title-1"],[1,"search-bar"],["type","text","placeholder","Search Skills",1,"search-input-bar","sub-title-6",3,"ngModel","ngModelChange","input","keyup.enter"],["type","button","value","Search",1,"button-search","pointer",3,"click"],[1,"flex-display"],[1,"items-selector"],[1,"sub-title-6","font-grey"],[1,"drop-down","sub-title-6",3,"ngModel","ngModelChange"],["class","drop-option",3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"drop-option",3,"ngValue"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"sub-title-6"],[4,"ngFor","ngForOf"],["id","skill-pagination",1,"sub-title-6","text-centered",3,"pageChange"],["size","ls",1,"pointer",3,"icon","click"],["class","no-records sub-title-6 text-centered",4,"ngIf"],["type","button","value","Add Skill",1,"button-xl","right-float","pointer","sub-title-6",3,"click"],[1,"no-records","sub-title-6","text-centered"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Xb(1,"h1",1),a.Ic(2,"Skills"),a.Wb(),a.Tb(3,"br"),a.Xb(4,"div",2),a.Xb(5,"input",3),a.ec("ngModelChange",(function(t){return e.retrievePageState.query=t}))("input",(function(t){return e.checkEmpty(t.target.value)}))("keyup.enter",(function(){return e.getSkills()})),a.Wb(),a.Xb(6,"input",4),a.ec("click",(function(){return e.getSkills()})),a.Wb(),a.Wb(),a.Ic(7," \xa0 \xa0 "),a.Xb(8,"div",5),a.Xb(9,"div",6),a.Xb(10,"h3",7),a.Ic(11," Sort "),a.Wb(),a.Xb(12,"select",8),a.ec("ngModelChange",(function(t){return e.changeSortOption(t)})),a.Gc(13,f,2,2,"option",9),a.Wb(),a.Wb(),a.Ic(14," \xa0 "),a.Xb(15,"div",6),a.Xb(16,"h3",7),a.Ic(17," Items \xa0 "),a.Wb(),a.Xb(18,"select",8),a.ec("ngModelChange",(function(t){return e.changeItemsCount(t)})),a.Gc(19,k,2,2,"option",9),a.Wb(),a.Wb(),a.Ic(20," \xa0 "),a.Xb(21,"div",6),a.Xb(22,"h3",7),a.Ic(23," Show \xa0 "),a.Wb(),a.Xb(24,"select",8),a.ec("ngModelChange",(function(t){return e.changeActiveOption(t)})),a.Gc(25,S,2,2,"option",9),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Tb(26,"br"),a.Gc(27,C,2,1,"ng-container",10),a.Gc(28,F,1,0,"app-loader",10),a.Gc(29,N,3,1,"ng-container",10)),2&t&&(a.Fb(5),a.nc("ngModel",e.retrievePageState.query),a.Fb(7),a.nc("ngModel",e.retrievePageState.sortOptions),a.Fb(1),a.nc("ngForOf",e.sortOptions),a.Fb(5),a.nc("ngModel",e.retrievePageState.itemsCount),a.Fb(1),a.nc("ngForOf",e.countOptions),a.Fb(5),a.nc("ngModel",e.retrievePageState.activeOptions),a.Fb(1),a.nc("ngForOf",e.activeOptions),a.Fb(2),a.nc("ngIf",e.skillsUIModel),a.Fb(1),a.nc("ngIf",e.fetching),a.Fb(1),a.nc("ngIf",e.skillsUIModel))},directives:[h.b,h.l,h.n,h.r,n.l,n.m,h.o,h.s,p.c,d.a,g.a],pipes:[p.b],styles:[".color-grey[_ngcontent-%COMP%]{color:#70727d}.right-float[_ngcontent-%COMP%]{float:right}.items-selector[_ngcontent-%COMP%]{justify-content:center;align-items:baseline}"]}),t})();var D=i("tyNb");let T=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Mb({type:t,selectors:[["app-skills"]],decls:2,vars:0,consts:[[1,"coda-content"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Tb(1,"router-outlet"),a.Wb())},directives:[D.g],styles:[".right-float[_ngcontent-%COMP%]{float:right}.top-controls[_ngcontent-%COMP%]{margin-bottom:20px}"]}),t})();const G=[{path:"",component:T,children:[{path:"",component:x}]}];let B=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)},imports:[[D.f.forChild(G)],D.f]}),t})();var U=i("PCNd"),j=i("Kb4U");let q=(()=>{class t{}return t.\u0275mod=a.Qb({type:t}),t.\u0275inj=a.Pb({factory:function(e){return new(e||t)},providers:[T],imports:[[n.c,B,d.b,h.h,p.a,U.a,j.b]]}),t})()}}]);